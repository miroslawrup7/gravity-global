{"version":3,"sources":["main.js"],"names":["popup","document","querySelector","openBtn","closeBtn","counterDisplay","resetBtn","clickCounter","addEventListener","classList","add","innerText","saveLng","remove","e","target","currentTarget","createDB","openRequest","indexedDB","open","onupgradeneeded","db","result","objectStoreNames","contains","createObjectStore","autoIncrement","onsuccess","request","transaction","objectStore","put","onerror","console","log","error","getLng","get"],"mappings":"AAEA,MAAAA,MAAAC,SAAAC,cAAA,UACAC,QAAAF,SAAAC,cAAA,QACAE,SAAAH,SAAAC,cAAA,cACAG,eAAAJ,SAAAC,cAAA,YACAI,SAAAL,SAAAC,cAAA,UAEA,IAAAK,aAAA,EAEAJ,QAAAK,iBAAA,SAAA,KACAR,MAAAS,UAAAC,IAAA,UACAH,eACAF,eAAAM,UAAAJ,aAAA,SACAA,aAAA,GACAD,SAAAG,UAAAC,IAAA,UAEAE,SAAA,IAGAR,SAAAI,iBAAA,SAAA,KACAR,MAAAS,UAAAI,OAAA,SAAA,IAGAb,MAAAQ,iBAAA,SAAAM,IACAA,EAAAC,SAAAD,EAAAE,eACAhB,MAAAS,UAAAI,OAAA,SACA,IAGAP,SAAAE,iBAAA,SAAA,KACAD,aAAA,EACAF,eAAAM,UAAAJ,aAAA,SACAD,SAAAG,UAAAI,OAAA,UACAD,SAAA,IAKA,MAAAK,SAAA,KACA,IAAAC,EAAAC,UAAAC,KAAA,YAAA,GAEAF,EAAAG,gBAAA,WACA,IAAAC,EAAAJ,EAAAK,OACAD,EAAAE,iBAAAC,SAAA,YACAH,EAAAI,kBAAA,UAAA,CAAAC,eAAA,GAEA,CAAA,EAGAV,WAEA,MAAAL,QAAA,KACA,IAAAM,EAAAC,UAAAC,KAAA,aAEAF,EAAAU,UAAA,WACA,IAIAC,EAJAX,EAAAK,OACAO,YAAA,UAAA,aACAC,YAAA,WAEAC,IAAAzB,aAAA,gBAEAsB,EAAAD,UAAA,WAAA,EAEAC,EAAAI,QAAA,WACAC,QAAAC,IAAA,QAAAN,EAAAO,MACA,CACA,CAAA,EAGAC,OAAA,KACA,IAAAnB,EAAAC,UAAAC,KAAA,aAEAF,EAAAU,UAAA,WACA,IAIAC,EAJAX,EAAAK,OACAO,YAAA,WACAC,YAAA,WAEAO,IAAA,gBAEAT,EAAAD,UAAA,WACArB,eACAA,aAAAsB,EAAAN,OAEA,EAEAM,EAAAI,QAAA,WACAC,QAAAC,IAAA,QAAAN,EAAAO,MACA,CACA,CAAA,EAGAC","file":"all.min.js","sourcesContent":["// LIGHTBOX\r\n\r\nconst popup = document.querySelector(\"#popup\");\r\nconst openBtn = document.querySelector(\".btn\");\r\nconst closeBtn = document.querySelector(\".close-btn\");\r\nconst counterDisplay = document.querySelector(\".counter\");\r\nconst resetBtn = document.querySelector(\".reset\");\r\n\r\nlet clickCounter = 0;\r\n\r\nopenBtn.addEventListener(\"click\", () => {\r\n    popup.classList.add(\"active\");\r\n    clickCounter++;\r\n    counterDisplay.innerText = clickCounter + \" times\";\r\n    if (clickCounter > 5) {\r\n        resetBtn.classList.add(\"active\");\r\n    }\r\n    saveLng();\r\n});\r\n\r\ncloseBtn.addEventListener(\"click\", () => {\r\n    popup.classList.remove(\"active\");\r\n});\r\n\r\npopup.addEventListener(\"click\", (e) => {\r\n    if (e.target === e.currentTarget) {\r\n        popup.classList.remove(\"active\");\r\n    }\r\n});\r\n\r\nresetBtn.addEventListener(\"click\", () => {\r\n    clickCounter = 0;\r\n    counterDisplay.innerText = clickCounter + \" times\";\r\n    resetBtn.classList.remove(\"active\");\r\n    saveLng();\r\n});\r\n\r\n// IndexedDB\r\n\r\nconst createDB = () => {\r\n    let openRequest = indexedDB.open(\"counterDB\", 1);\r\n\r\n    openRequest.onupgradeneeded = function () {\r\n        let db = openRequest.result;\r\n        if (!db.objectStoreNames.contains(\"counter\")) {\r\n            db.createObjectStore(\"counter\", { autoIncrement: true });\r\n        }\r\n    };\r\n};\r\n\r\ncreateDB();\r\n\r\nconst saveLng = () => {\r\n    let openRequest = indexedDB.open(\"counterDB\");\r\n\r\n    openRequest.onsuccess = function () {\r\n        let db = openRequest.result;\r\n        let transaction = db.transaction(\"counter\", \"readwrite\");\r\n        let languageTrans = transaction.objectStore(\"counter\");\r\n\r\n        let request = languageTrans.put(clickCounter, \"counterValue\");\r\n\r\n        request.onsuccess = function () {};\r\n\r\n        request.onerror = function () {\r\n            console.log(\"Error\", request.error);\r\n        };\r\n    };\r\n};\r\n\r\nconst getLng = () => {\r\n    let openRequest = indexedDB.open(\"counterDB\");\r\n\r\n    openRequest.onsuccess = function () {\r\n        let db = openRequest.result;\r\n        let transaction = db.transaction(\"counter\");\r\n        let languageTrans = transaction.objectStore(\"counter\");\r\n\r\n        let request = languageTrans.get(\"counterValue\");\r\n\r\n        request.onsuccess = function () {\r\n            if (clickCounter) {\r\n                clickCounter = request.result;\r\n            }\r\n        };\r\n\r\n        request.onerror = function () {\r\n            console.log(\"Error\", request.error);\r\n        };\r\n    };\r\n};\r\n\r\ngetLng();\r\n"]}